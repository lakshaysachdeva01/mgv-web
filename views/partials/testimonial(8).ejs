    <!-- :: Testimonial -->
    <% if (testimonial && testimonial.length > 0) { %>
    <style>
        <% testimonial.forEach((slide, index) => { %>
        .testimonial .testimonial-carousel.owl-theme .owl-dots .owl-dot:nth-of-type(<%= index + 1 %>) span {
            background-image: url(<%= process.env.S3_BASE_URL + slide.image %>) !important;
        }
        <% }) %>
    </style>
    <section class="testimonial py-100">
      <div class="container">
          <div class="row">
              <div class="col-md-10 offset-md-1">
                  <div class="testimonial-carousel owl-carousel owl-theme">

                    
                    <% testimonial.forEach((slide) => { %>
                      <div class="item-box">
                          <div class="text-box"><%= slide.review.length > 125 ? slide.review.slice(0, 125) + '...' : slide.review %> 
                            <% if (slide.review.length > 125) { %>
                                <span class="read-more-btn" onclick="openReviewPopup(`<%= slide.review.replace(/'/g, '\\\'').replace(/"/g, '&quot;') %>`)">
                                    Read More
                                </span>
                            <% } %></div>
                          <div class="item-name text-center">
                              <i class="ar-icons-right-quote"></i>
                              <h5><%= slide.name %></h5>
                              <span><%= slide.companyProfile %></span>
                          </div>
                      </div>
                      <% }) %>
                   
                  </div>
              </div>
          </div>
      </div>
  </section>
  <% } %>

   <!-- TESTIMONIALS
        ================================================== -->
    
       
          
  <!-- Review Popup -->
  <div id="reviewPopup" class="review-popup">
    <div class="review-popup-content">
        <p id="fullReviewText" class="fullReviewText"></p>
    </div>
    <button class="close-popup" onclick="closeReviewPopup()">&times;</button>
  </div>
  
  <style>
    /* Glassy Popup Overlay */
    .review-popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        display: none;
        justify-content: center;
        align-items: center;
      
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
    }
  
    #fullReviewText {
      font-family: 'Rubik', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: #1b1a1a;
    font-size: 20px;
    line-height: 34px;
    font-weight: 500;
    margin-bottom: 19px
    }
  
    /* Popup Content */
    .review-popup-content {
        background: white;
        padding: 60px;
        border-radius: 12px;
        width: 50%;
        max-height: 80vh;
        overflow-y: auto;
        text-align: center;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
        transform: scale(0.8);
        transition: transform 0.3s ease-in-out;
    }
  
    /* Custom scrollbar for modal */
    .review-popup-content::-webkit-scrollbar {
        width: 8px;
    }
  
    .review-popup-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }
  
    .review-popup-content::-webkit-scrollbar-thumb {
        background: #cb1125;
        border-radius: 10px;
    }
  
    .review-popup-content::-webkit-scrollbar-thumb:hover {
        background: #e04718;
    }
  
    @media (max-width: 600px) {
        .review-popup-content {
            padding: 15px;
            margin: 10px;
            width: 100%;
            max-height: 85vh;
        }
    }
  
    /* Close Button Outside */
    #reviewPopup .close-popup {
        position: absolute;
        top: 20px;
        right: 20px;
        height: 40px;
        width: 40px;
        padding: 0;
        font-size: 24px;
        cursor: pointer;
        background: none;
        border: none;
        background-color: #76767691;
        color: white;
        font-weight: bold;
        z-index: 1001;
    }
  
    
  
    .testimonial-text {
        color: #323232;
        font-size: 16px;
        font-weight: 500;
        line-height: 26px;
    }
  
    /* Read More Button (Inside the Box) */
    .read-more-btn {
        margin-top: 5px;
        background-color: transparent;
        color: #999999;
        font-size: 15px;
        font-style: italic;
        font-weight: 400;
        cursor: pointer;
        padding: 5px 8px 5px 0;
        border-radius: 4px;
        transition: all 0.3s ease-in-out;
    }
  
    /* Disable scrolling when modal is open */
    body.modal-open {
        overflow: hidden;
        position: fixed;
        width: 100%;
    }
  
    /* Show animation */
    .review-popup.show {
        display: flex;
        opacity: 1;
    }
  
    .review-popup.show .review-popup-content {
        transform: scale(1);
    }
  </style>
  
  <script>
    let scrollPosition = 0;
    
    function openReviewPopup(reviewText) {
        // Save current scroll position
        scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
        
        document.getElementById("fullReviewText").innerText = reviewText;
        const popup = document.getElementById("reviewPopup");
        popup.style.display = "flex";
        setTimeout(() => popup.classList.add("show"), 10);
        
        // Freeze background at current position
        document.body.style.top = `-${scrollPosition}px`;
        document.body.classList.add("modal-open");
        
        // Prevent spacebar scrolling
        window.addEventListener('keydown', preventSpaceScroll, false);
    }
  
    function closeReviewPopup() {
        const popup = document.getElementById("reviewPopup");
        popup.classList.remove("show");
        setTimeout(() => popup.style.display = "none", 300);
        
        // Restore scroll position
        document.body.classList.remove("modal-open");
        document.body.style.top = '';
        window.scrollTo(0, scrollPosition);
        
        // Re-enable spacebar
        window.removeEventListener('keydown', preventSpaceScroll, false);
    }
    
    // Prevent spacebar from scrolling
    function preventSpaceScroll(e) {
        if (e.keyCode === 32 && e.target === document.body) {
            e.preventDefault();
        }
    }
  
    // Close popup on clicking outside
    document.getElementById("reviewPopup").addEventListener("click", function(event) {
        if (event.target === this) {
            closeReviewPopup();
        }
    });
  </script>
  